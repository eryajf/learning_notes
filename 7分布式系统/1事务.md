## 事务

  由集中式系统到分布式系统的发展，事务的原则也有原先的ACID发展成了CAP/BASE
  
  [从ACID到CAP/BASE](https://my.oschina.net/OutOfMemory/blog/796248)

#### ACID

事务(Transaction)是由一系列对系统中数据进行访问和更新的操作锁组成的一个程序执行逻辑单元(Unit)，狭义上的事务特指数据库事务。

事务具有四个特征，分别是原子性(Atomicity)、一致性(Consistency)、隔离性(Isolation)和持久性(Durability)，简称事务的ACID特性。

- 原子性：

   事务必须是一个原子的操作序列单元，要么全部成功，要么全部失败。
   
- 一致性：

   事务的执行不能破坏数据库数据的完整性和一致性，一个事务在执行之前和执行之后，数据库都必须处于一致性状态。

- 隔离性：
 
   并发的事务是相互隔离的，一个事务的执行不能被其他事务干扰，定义了4个事务隔离级别。
 
- 持久性：

   事务一旦提交，他对数据库中对应数据的状态变更就应该是永久性的。


#### CAP定理

参考资料：

[大白话讲解CAP定理](https://my.oschina.net/hensemlee/blog/1914886)

-  一致性（C）：

   所有节点在同一时间具有相同的数据，注：这里的一致性和ACID中的一致性是不一样的
   
- 可用性（A）：

   服务一直可用，而且是正常响应时间

- 分区容错性（P）：

   分布式系统在遇到某节点或网络分区故障的时候，仍然能够对外提供满足一致性和可用性的服务

   
>| 一致性和可用性，为什么不可能同时成立？答案很简单，因为可能通信失败（即出现分区容错）
>| 数据库的读写分离的例子，如果要求主从数据一致，必须等待主同步数据给从，这段时间，不可用


#### BASE理论

   BASE是Basically Available(基本可用)、Soft state(软状态)和Eventually consistent(最终一致性)三个短语的简写。很明显BASE理论更加倾向满足CAP理论中的AP，既满足可用性，分区容忍性的系统，通常可能对一致性要求低一些。

##### CAP理论中根据倾向的不同：

CA – 单点集群，满足一致性，可用性的系统，通常在可扩展性上不太强大（ACID）

AP – 满足可用性，分区容忍性的系统，通常可能对一致性要求低一些（BASE）

CP – 满足一致性，分区容忍必的系统，通常性能不是特别高（BASE）个人认为里面的？也可以写成BASE

关系型数据库(RDBMS)遵循ACID原则，非关系型数据库遵循BASE原则

